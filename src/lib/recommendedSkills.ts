/**
 * Recommended skills per specialist group.
 * Each group has sub-sections with skill names.
 * "soft" is a universal group shown to everyone.
 */

export interface SkillSubGroup {
  title: string;
  skills: string[];
}

export interface GroupSkills {
  groupKey: string;
  sections: SkillSubGroup[];
}

const COACHING: GroupSkills = {
  groupKey: "coaching",
  sections: [
    {
      title: "Основные навыки",
      skills: [
        "Планирование тренировочного процесса (микро/мезо/макро)",
        "Подготовка к матчу и управление тренировочной нагрузкой",
        "Анализ тренировок и матчей (видео/отчёты)",
        "Индивидуальная работа с игроками (развитие, обратная связь)",
        "Постановка задач штабу и контроль исполнения",
      ],
    },
    {
      title: "Работа с данными и технологиями",
      skills: [
        "Чтение отчетов GPS/нагрузки (понимание ключевых показателей)",
        "Работа с видео-плейлистами и клипами (разбор с командой)",
        "Использование дашбордов для планирования и контроля",
        "Формулирование запросов к аналитику",
      ],
    },
    {
      title: "Поддержка решений",
      skills: [
        "Принятие решений на основе данных и контекста",
        "Коммуникация с S&C, медициной, аналитикой (единая картина)",
        "Работа в соревновательный период: быстрые корректировки",
      ],
    },
  ],
};

const PERFORMANCE: GroupSkills = {
  groupKey: "performance",
  sections: [
    {
      title: "Основные навыки",
      skills: [
        "Планирование физподготовки (сезон/предсезон/в сезоне)",
        "Развитие силы, скорости, выносливости (по роли/позиции)",
        "Контроль объёма/интенсивности тренировок",
        "Проведение тестов (скорость, прыжок, силовые, аэробные)",
        "Обучение технике упражнений и профилактика травм",
      ],
    },
    {
      title: "Работа с данными",
      skills: [
        "Интерпретация внешней нагрузки (GPS)",
        "Интерпретация внутренней нагрузки (RPE, HR/HRV)",
        "Wellness-мониторинг: сбор, анализ, реакция",
        "Контроль утомления и восстановления, корректировка планов",
        "Отчётность по микроциклу: что изменили и почему",
      ],
    },
    {
      title: "Продвинутые навыки",
      skills: [
        "Индивидуализация нагрузок (по профилю игрока)",
        "Возвращение к нагрузкам после травм (в связке с мед. штабом)",
        "Модели готовности (простые правила + флаги)",
        "Встраивание силовой работы в общую модель игры/нагрузок",
      ],
    },
  ],
};

const ANALYTICS: GroupSkills = {
  groupKey: "analytics",
  sections: [
    {
      title: "Основные навыки",
      skills: [
        "Сбор и валидация спортивных данных (контроль качества)",
        "Анализ тренировочных и игровых показателей",
        "Построение отчетов и дашбордов под тренерский штаб",
        "Формирование ключевых метрик (KPI) и логики расчётов",
        "Анализ динамики показателей (тренды, сравнения, периодизация)",
        "Работа с субъективными данными (wellness/опросы)",
      ],
    },
    {
      title: "Работа с технологиями",
      skills: [
        "SQL: выборки, JOIN, агрегации",
        "Работа с базами данных и таблицами (структура, связи, справочники)",
        "Excel / Google Sheets: сводные, сложные формулы, массивы",
        "Power BI / Tableau: модель данных, меры, интерактивные отчеты",
        "Python: обработка данных (pandas), автоматизация отчетов",
        "Интеграция данных из разных источников (GPS, wellness, видео)",
        "Автоматизация сборов/обновлений (регламент, расписание, контроль ошибок)",
      ],
    },
    {
      title: "Поддержка принятия решений",
      skills: [
        "Подготовка аналитики до/после матча и по микроциклам",
        "Перевод данных в понятные выводы и рекомендации для штаба",
        "Выявление отклонений, рисков и красных флагов по нагрузке/состоянию",
        "Поддержка решений в соревновательный период",
        "Коммуникация с тренерами: ответы на вопрос «что делать завтра»",
      ],
    },
  ],
};

const VIDEO_ANALYTICS: GroupSkills = {
  groupKey: "video_analytics",
  sections: [
    {
      title: "Основные навыки",
      skills: [
        "Разметка видео: теги/ивенты, структура кодинга",
        "Сбор и нарезка клипов по задачам тренера",
        "Подготовка плейлистов (игрок/линия/команда/ситуации)",
        "Постматчевый разбор: ключевые эпизоды и выводы",
        "Презентации для штаба/команды (коротко и по делу)",
      ],
    },
    {
      title: "Инструменты и процессы",
      skills: [
        "Hudl Sportscode: кодинг-шаблоны, категории, панель кодинга",
        "Hudl / Wyscout: поиск эпизодов, шэринг, библиотека",
        "Live workflow: тегирование/клипы во время матча",
        "Стандартизация: naming, структура проектов, хранение и доступ",
        "Синхронизация видео + данные",
      ],
    },
    {
      title: "Продвинутые навыки",
      skills: [
        "Построение матрицы анализа под стиль команды",
        "Скаутинг соперника: шаблоны, привычки, сильные/слабые стороны",
        "Анализ стандартов (угловые/штрафные): структура и эффективность",
        "Индивидуальные плейлисты по игрокам (позиционные профили)",
        "Быстрая подготовка pre-match pack + in-game notes",
        "Storytelling через видео: тезис → клип → вывод → действие",
      ],
    },
  ],
};

const MEDICAL: GroupSkills = {
  groupKey: "medical",
  sections: [
    {
      title: "Основные навыки",
      skills: [
        "Контроль состояния спортсменов и ежедневный мониторинг",
        "Организация восстановления (процедуры/режим/контроль)",
        "Оценка утомления и готовности (по протоколам штаба)",
        "Сопровождение return-to-train / return-to-play",
      ],
    },
    {
      title: "Работа с данными",
      skills: [
        "Анализ субъективных данных (самочувствие/сон/стресс)",
        "Ведение восстановительных/медицинских записей (структурировано)",
        "Согласование данных между медициной, S&C и тренерами",
        "Отчётность по статусам и ограничениям",
      ],
    },
    {
      title: "Продвинутые навыки",
      skills: [
        "Протоколы принятия решений по допуску к нагрузке",
        "Риски и ограничения: коммуникация без конфликтов",
        "Настройка процессов в AMS/системах мониторинга",
      ],
    },
  ],
};

const OTHER: GroupSkills = {
  groupKey: "other",
  sections: [
    {
      title: "Основные навыки",
      skills: [
        "Проектирование цифровых решений для спорта (процессы → продукт)",
        "Сбор требований у тренеров/штаба и перевод в понятные задачи",
        "Построение MVP и улучшение по обратной связи",
        "Управление внедрением: обучение, поддержка, принятие пользователями",
      ],
    },
    {
      title: "Технологии",
      skills: [
        "Прототипирование (Figma или аналоги)",
        "Визуализация данных и сценарии использования",
        "Настройка логики доступа/ролей (privacy, видимость, права)",
      ],
    },
    {
      title: "Коммуникация",
      skills: [
        "Работа с разными стейкхолдерами (тренеры/медицина/аналитика/разработка)",
        "Приоритизация: что важно сейчас, что позже",
        "Документация процессов (короткая и полезная)",
      ],
    },
  ],
};

export const SOFT_SKILLS: SkillSubGroup = {
  title: "Soft skills",
  skills: [
    "Объяснение сложного простым языком (для штаба/спортсменов)",
    "Работа в условиях давления и жёстких дедлайнов",
    "Быстрое принятие решений при неполных данных",
    "Командная коммуникация внутри штаба",
    "Ответственность за результат и соблюдение регламентов",
    "Адаптация и готовность менять план по ситуации",
  ],
};

const ALL_GROUPS: GroupSkills[] = [COACHING, PERFORMANCE, ANALYTICS, VIDEO_ANALYTICS, MEDICAL, OTHER];

/** Get recommended skill sections for a given group key */
export function getRecommendedSkills(groupKey: string | null): SkillSubGroup[] {
  // For analytics group, also include video analytics sections
  if (groupKey === "analytics") {
    const analytics = ALL_GROUPS.find(g => g.groupKey === "analytics");
    const video = ALL_GROUPS.find(g => g.groupKey === "video_analytics");
    const sections: SkillSubGroup[] = [];
    if (analytics) sections.push(...analytics.sections);
    if (video) {
      // Add video analytics sections with prefixed titles
      video.sections.forEach(s => {
        sections.push({ title: `Видеоаналитика: ${s.title}`, skills: s.skills });
      });
    }
    sections.push(SOFT_SKILLS);
    return sections;
  }

  const group = ALL_GROUPS.find(g => g.groupKey === groupKey);
  const sections = group ? [...group.sections] : [];
  sections.push(SOFT_SKILLS);
  return sections;
}
